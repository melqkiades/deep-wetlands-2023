Bootstrap: docker
# From: pytorch/pytorch:1.12.1-cuda11.3-cudnn8-devel
# From: pytorch/pytorch:1.13.1-cuda11.6-cudnn8-devel
# From: tensorflow/tensorflow:2.11.0-gpu
# From: nvidia/cuda:11.7.0-devel-ubuntu22.04
From: nvidia/cuda:11.8.0-devel-ubuntu20.04

%post
    TZ=Europe/Stockholm && \
    ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && \
    echo $TZ > /etc/timezone

    # ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
    apt-get -qq update && apt-get -qq install libgdal-dev -y
    apt-get install -y python3.9 python3-pip
    # ln -s /usr/bin/pip3 /usr/bin/pip
    # ln -s /usr/bin/python3 /usr/bin/python
    pip3 -q install pip --upgrade
    apt-get -qq install python3-gdal -y
    apt-get -qq install python3-numpy python3-scipy -y
    pip3 install numpy --upgrade
    pip3 -q install --upgrade folium
    apt install libspatialindex-dev -y
    pip3 -q install rtree
    pip3 -q install geopandas
    pip3 -q install geojson
    pip3 -q install geemap
    pip3 -q install rasterio
    pip3 -q install tqdm
    pip3 -q install eeconvert
    pip3 -q install torch
    pip3 -q install torchvision
    pip3 -q install python-dotenv
    pip3 -q install wandb

%environment
    export PYTHONPATH='/cephyr/users/ezioc/Alvis/deep-wetlands-2023'
